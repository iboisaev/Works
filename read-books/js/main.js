const doc=document;doc.addEventListener("DOMContentLoaded",(function(){const t=doc.getElementsByTagName("body")[0],e=(doc.querySelector(".header"),doc.querySelector(".header__menu"),doc.querySelector(".menu-burger"),doc.querySelector(".btn-up"),doc.querySelectorAll(".mode"),doc.querySelectorAll(".form"),doc.querySelectorAll(".popup")),n=doc.querySelector(".cart-popup"),o=doc.querySelectorAll(".popup__close"),c=doc.querySelector(".items"),i=(doc.querySelectorAll(".dropdown"),doc.querySelectorAll(".lazy-anchor")),r=doc.querySelectorAll(".lock-padding"),s=doc.querySelectorAll(".lock-margin");let l=!0;function a(){const e=window.innerWidth-doc.querySelector(".wrapper").offsetWidth+"px";if(r.length>0)for(let t=0;t<r.length;t++){r[t].style.paddingRight=e}if(s.length>0)for(let t=0;t<s.length;t++){s[t].style.marginRight=e}t.style.paddingRight=e,t.classList.add("locked"),l=!1,setTimeout((function(){l=!0}),500)}function d(){setTimeout((function(){if(r)for(let t=0;t<r.length;t++){r[t].style.paddingRight="0px"}if(s)for(let t=0;t<s.length;t++){s[t].style.marginRight="0px"}t.style.paddingRight=0,t.classList.remove("locked")}),500),l=!1,setTimeout((function(){l=!0}),500)}function u(t){if(l)return t.classList.remove("open"),d(),t}function p(t){const{id:e,img:n,name:o,author:i,genres:r,originalLang:s,langs:l,classes:a}=t,d=`\n\t\t\t<a href="#" class="${a}">\n\t\t\t  \t<span class="item__img ibg" style="background-image: url('${n}');">\n\t\t\t  \t\t<span class="item__cover">\n\t\t\t  \t\t\t<svg class="icon icon--view">\n\t\t\t\t\t\t\t<use xlink:href="img/icons/view.svg#view"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t  \t\t</span>\n\t\t\t  \t</span>\n\t\t\t  \t<span class="item__title">${i} - "${o}"</span>\n\t\t\t</a>\n\t\t`;c.insertAdjacentHTML("beforeend",d)}i.forEach(t=>{t.addEventListener("click",(function(t){t.preventDefault();let e=this.getAttribute("href").substring(1);const n=document.getElementById(e).getBoundingClientRect().top-70;window.scrollBy({top:n,behavior:"smooth"})}))}),async function(t){const e=await fetch(t);if(!e.ok)throw new Error("Ошибка по адресу $(url), статус ошибка $(response.status)!");return await e.json()}("./json/books.json").then((function(t){t.forEach(p)})),setTimeout((function(){doc.querySelectorAll(".item").forEach(t=>{t.addEventListener("click",(function(t){var e;t.preventDefault(),e=n,l&&(e.classList.add("open"),a())}))})}),1200),o.forEach(t=>{t.addEventListener("click",(function(t){t.preventDefault(),u(this.closest(".popup"))}))}),e.forEach(t=>{t.addEventListener("click",(function(e){e.target.closest(".popup__body")||u(t)}))}),doc.addEventListener("keydown",(function(t){27===t.which&&u(doc.querySelector(".popup.open"))}))})),$(doc).ready((function(){$("body"),$(".btn-up"),$(".nav__link"),$(".btns"),$(".popup");const t=$(".filters__title");$(".filters__btn"),$(".callback-popup"),$(".thanks-popup"),$(".popup__close");setTimeout((function(){let e=$(".books__right-title span");var n=$(".items").isotope({itemSelector:".item"}),o=n.data("isotope");t.on("click",(function(){let t=$(this).next();$(this).toggleClass("active"),t.hasClass("open")?t.fadeOut():t.fadeIn(),t.toggleClass("open")}));var c={};function i(){n.isotope("getItemElements").length;e.text(o.filteredItems.length)}$(".filters").on("click",".filters__btn",(function(t){var e=$(t.currentTarget),o=e.parents(".btn-group").attr("data-filter-group");c[o]=e.attr("data-filter");var r=function(t){var e="";for(var n in t)e+=t[n];return e}(c);n.isotope({filter:r}),i()})),$(".btn-group").each((function(t,e){var n=$(e);n.on("click","button",(function(t){n.find(".is-checked").removeClass("is-checked"),$(t.currentTarget).addClass("is-checked")}))})),i()}),1200)}));